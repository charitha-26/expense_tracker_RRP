<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Finance Tracker</title>  
  <link rel="stylesheet" href="/css/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css' rel='stylesheet' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>

</head>

<body class="bg-dark text-white">
  <div class="d-flex">
    <!-- Sidebar -->
    <nav class="bg-black vh-100 p-3 text-white" style="width: 250px;">
      <h4 class="text-center">ðŸ“Š Expensio</h4>
      <ul class="nav flex-column mt-4">
        <li class="nav-item"><a class="nav-link text-white" href="javascript:navigateTo('home')">Home</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="javascript:navigateTo('expenses')">Expenses</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="javascript:navigateTo('tips')">Tips</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="javascript:navigateTo('calendar')">Calendar</a></li>

        <li class="nav-item"><a class="nav-link text-white" href="javascript:navigateTo('settings')">Settings</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="javascript:navigateTo('support')">Support</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="/logout">Logout</a></li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow-1 p-4" id="main-content">
      
      <!-- Home Page -->
      <div id="home" class="content-page">
        <h2 class="mb-4">Welcome to Smart Finance</h2>
        <p id="date-time" class="text-end"></p>

        <!-- Summary Cards -->
        <div class="row g-4 mb-4">
          <div class="col-md-4">
            <div class="card bg-secondary text-white p-3">
              <h5>Total Savings</h5>
              <p id="savings" th:text="${settings.currency} + ' ' + ${savings}">â‚¹0</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card bg-secondary text-white p-3">
              <h5>Monthly Income</h5>
              <p id="monthly-income" th:text="${settings.currency} + ' ' + ${totalIncome}">â‚¹0</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card bg-secondary text-white p-3">
              <h5>Monthly Expenses</h5>
              <p id="monthly-expense" th:text="${settings.currency} + ' ' + ${totalExpense}">â‚¹0</p>
            </div>
          </div>
        </div>

        <!-- Charts -->
        <div class="row g-4 mb-4">
          <div class="col-md-6">
            <canvas id="barChart"></canvas>
          </div>
          <div class="col-md-6">
            <select id="timeRange" class="form-select mb-2" onchange="updatePieChart()">
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
            <canvas id="pieChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Expenses Page -->
      <div id="expenses" class="content-page" style="display: none;">
        <h2>Expense Tracker</h2>
      
        <!-- Export Buttons -->
        <div class="mb-3">
          <button class="btn btn-outline-light me-2" onclick="exportFile('pdf')">Export PDF</button>
          <button class="btn btn-outline-light" onclick="exportFile('excel')">Export Excel</button>
        </div>
      
        <!-- Transaction Form -->
        <form id="transaction-form" class="mb-4">
          <div class="row g-3">
            <div class="col-md-3">
              <input type="text" id="transaction-desc" class="form-control" placeholder="Description" required>
            </div>
            <div class="col-md-2">
              <input type="number" id="transaction-amount" class="form-control" placeholder="Amount" required>
            </div>
            <div class="col-md-2">
              <select id="transaction-type" class="form-select">
                <option value="income">Income</option>
                <option value="expense">Expense</option>
                <option value="loans">Loans</option>
                <option value="emis">EMIs</option>
                <option value="others">Others</option>
              </select>
            </div>
            <div class="col-md-2">
              <select id="transaction-category" class="form-select">
                <option value="food">Food</option>
                <option value="transport">Transport</option>
                <option value="shopping">Shopping</option>
                <option value="education">Education</option>
                <option value="health">Health</option>
                <option value="income">Income</option>
                <option value="others">Others</option>
              </select>
            </div>
            <div class="col-md-2">
              <button class="btn btn-success w-100" type="submit">Add</button>
            </div>
          </div>
        </form>
      
        <!-- Transactions Table -->
        <table class="table table-dark table-striped">
          <thead>
            <tr>
              <th>Description</th>
              <th>Amount</th>
              <th>Type</th>
              <th>Category</th>
              <th>Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="transactions-table">
            <!-- Filled by JavaScript -->
          </tbody>
        </table>
      </div>
      
      

      <!-- Tips Page -->
      <div id="tips" class="content-page" style="display: none;">
        <h2>Financial Tips</h2>
        <ul id="tips-list"></ul>
      </div>

      <!-- Settings Page -->
      <div id="settings" class="content-page" style="display: none;">
        <h2>Account Settings</h2>
        <form id="settings-form">
          <div class="mb-3">
            <label for="theme" class="form-label">Theme</label>
            <select id="theme" class="form-select" th:value="${settings.theme}">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="currency" class="form-label">Currency</label>
            <select id="currency" class="form-select" th:value="${settings.currency}">
              <option value="INR">â‚¹ INR</option>
              <option value="USD">$ USD</option>
              <option value="EUR">â‚¬ EUR</option>
              <option value="GBP">Â£ GBP</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="language" class="form-label">Language</label>
            <select id="language" class="form-select" th:value="${settings.language}">
              <option value="en">English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
            </select>
          </div>
          <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" id="email-notifications" th:checked="${settings.emailNotifications}">
            <label class="form-check-label" for="email-notifications">Enable Email Notifications</label>
          </div>
          <button type="submit" class="btn btn-primary">Save Settings</button>
        </form>
      </div>
      <!-- Calendar Page -->
      <div id="calendar" class="content-page" style="display:none;">
        <h2>Transaction Calendar</h2>
        <div id='fc-calendar'></div>
      </div>
      
      <!-- Support Page -->
      <div id="support" class="content-page" style="display: none;">
        <h2>Support Page</h2>
        
        <!-- Support Ticket Form -->
        <h3>Submit a Support Ticket</h3>
        <form id="support-form">
          <div class="mb-3">
            <label for="ticket-title" class="form-label">Ticket Title</label>
            <input type="text" id="ticket-title" class="form-control" required />
          </div>
          <div class="mb-3">
            <label for="ticket-description" class="form-label">Description</label>
            <textarea id="ticket-description" class="form-control" rows="4" required></textarea>
          </div>
          <div class="mb-3">
            <label for="ticket-priority" class="form-label">Priority</label>
            <select id="ticket-priority" class="form-select" required>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
          </div>
          <button type="submit" class="btn btn-success">Submit Ticket</button>
        </form>

        <!-- FAQs Section -->
        <h3 class="mt-5">Frequently Asked Questions (FAQs)</h3>
        <ul id="faqs-list" class="list-group"></ul>

        <!-- Support Contact Information -->
        <h3 class="mt-5">Contact Information</h3>
        <p>If you need further assistance, please contact us:</p>
        <p>Email: <a href="keerthanasadanala1@gmail.com">support@smartfinance.com</a></p>
        <p>Phone: +1 (123) 456-7890</p>
      </div>
    </main>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
